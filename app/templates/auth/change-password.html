{% extends "_base_page.html" %}

{% block page_title %}Change password â€“ Digital Marketplace{% endblock %}

{% block breadcrumb %}
  {%
    with items = [
      {
        "link": "/",
        "label": "Digital Marketplace"
      },
      {
        "link": dashboard_url,
        "label": "Your account"
      }
    ]
  %}
    {% include "toolkit/breadcrumb.html" %}
  {% endwith %}
{% endblock %}

{% block main_content %}
  {% include 'toolkit/forms/validation.html' %}

{% with
  heading = "Change your password"
%}
  {% include "toolkit/page-heading.html" %}
{% endwith %}

<form autocomplete="off" action="{{ url_for('.change_password') }}" method="POST">

    <div class="grid-row">
        <div class="column-two-thirds">
            {{ form.hidden_tag() }}
          
            {% with question = form.old_password.label,
                    name = "old_password",
                    error = errors.get('old_password', {}).get('message'),
                    value = form.old_password.data,
                    type = "password",
                    autocomplete = "off"
            %}
              {% include "toolkit/forms/textbox.html" %}
            {% endwith %}
  
          {% with question = form.password.label,
                  name = "password",
                  error = errors.get('password', {}).get('message'),
                  hint = form.password.hint,
                  value = form.password.data,
                  type = "password",
                  autocomplete = "off"
          %}
            {% include "toolkit/forms/textbox.html" %}
          {% endwith %}
  
          {% with question = form.confirm_password.label,
                  name = "confirm_password",
                  error = errors.get('confirm_password', {}).get('message'),
                  value = form.confirm_password.data,
                  type = "password",
                  autocomplete = "off"
          %}
            {% include "toolkit/forms/textbox.html" %}
          {% endwith %}

            {%
              with
              type = "save",
              label = "Save changes"
            %}
              {% include "toolkit/button.html" %}
            {% endwith %}
        </div>
    </div>
</form>
{%
  with
  url = dashboard_url,
  text = "Return to your account"
%}
  {% include "toolkit/secondary-action-link.html" %}
{% endwith %}
{% endblock %}
